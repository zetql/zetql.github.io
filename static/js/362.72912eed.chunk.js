"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[362],{3362:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var r,a,i,o,c=n(3955),u=n(9223),s=n(8986),l=n(7125),f=n(7370),d=n(379),p=n(7139),h=(0,p.HE)({query:function(e){var t=e.size,n=e.page;return(0,d.z)("/stocks-static-cursor?size=".concat(t,"&page=").concat(n)).then((function(e){return{stocks:e.data,hasNext:e.hasNext}}))},cursorMode:"static",normalize:function(e){return e.reduce((function(e,t){return e.concat(t.data.stocks)}),[])},cacheKeyBy:function(e){return e.page},getNextCursor:function(e){var t=e.cursor;return e.data.hasNext?(0,f.Z)((0,f.Z)({},t),{},{page:t.page+1}):null}}),y=n(7363),m=n(7582),g=n(1194),v=n(9477),x=n(8304),b=n(9887),k=n(3082),S=n(2774),j=m.ZP.span(r||(r=(0,u.Z)(["\n  display: block;\n  margin-top: 4px;\n  color: #121212;\n  &.is-down {\n    color: #007aff;\n  }\n  &.is-up {\n    color: #e74c3c;\n  }\n"]))),N=[{key:"id",body:function(e){return e.id.toString()},head:"ID",width:"60px"},{key:"name",body:function(e){return e.name},head:"Name",flex:2.5},{key:"symbol",body:function(e){return e.symbol},head:"Symbol"},{key:"company",body:function(e){return e.company},head:"Company"},{key:"price",body:function(e){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g.n,{amount:e.price}),(0,S.jsxs)(j,{className:e.percent>0?"is-up":0===e.percent?void 0:"is-down",children:[e.percent,"%"]})]})},head:"Price"}],w=m.ZP.div(a||(a=(0,u.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 10px 20px;\n  position: sticky;\n  top: 0;\n  width: 100%;\n  height: 60px;\n  z-index: 4;\n  background-color: #f8f8f8;\n  label {\n    display: block;\n  }\n  select {\n    width: 100px;\n    padding: 0 10px;\n    border: none;\n    height: 40px;\n    margin-left: 10px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    margin-right: 10px;\n  }\n  "," {\n    margin-left: 10px;\n  }\n"])),x.wg),T=(0,m.ZP)(y.b)(i||(i=(0,u.Z)(["\n  & ."," {\n    position: sticky;\n    top: 60px;\n  }\n"])),k.A.thead),Z=[10,20,30],C=m.ZP.div(o||(o=(0,u.Z)(["\n  overflow-y: scroll;\n  height: 100%;\n  position: relative;\n"]))),M=function(){var e=(0,p.dc)(h),t=e.isFetching,n=e.isRefetching,r=e.isFetchingPrev,a=e.isFetchingNext,i=e.data,o=e.error,u=e.nextCursor,f=(0,s.useState)(Z[0]),d=(0,c.Z)(f,2),y=d[0],m=d[1];return(0,s.useEffect)((function(){var e="stock_".concat(y);h.fetchQuery((function(e){return e||{size:y,page:1}}),e)}),[y]),o?(0,S.jsx)(v.m,{buttons:[{label:"reload",onClick:function(){h.refetchQuery()}}]}):(0,S.jsx)(C,{children:(0,S.jsxs)(b.B,{children:[(0,S.jsxs)(w,{children:[(0,S.jsx)("label",{htmlFor:"size",children:"Page Size"}),(0,S.jsx)("select",{id:"size",defaultValue:y,onChange:function(e){m(Number(e.target.value))},children:Z.map((function(e){return(0,S.jsx)("option",{value:e,children:e.toString()},e.toString())}))}),(0,S.jsx)(x.wg,{fillColor:"primary",fillType:"line",onClick:function(){h.fetchQuery({size:y,page:1})},children:"restart"}),(0,S.jsx)(x.wg,{fillColor:"primary",fillType:"fill",onClick:function(){h.refetchQuery()},children:"refetch"})]}),(0,S.jsx)(T,{isLoading:!h.isInitiated()&&t,className:"default-table",items:i,trackBy:function(e){return e.id.toString()},generator:N}),(0,S.jsx)(l.U,{hasNext:!!u,isFetching:a,recheckDeps:"".concat(n,"_").concat(r),fetch:h.fetchNext})]})})}},379:function(e,t,n){n.d(t,{z:function(){return r}});var r=function(){return fetch.apply(void 0,arguments).then((function(e){return e.json().then((function(t){if(!e.ok)throw t;return t})).catch((function(t){if(e.ok)return{};throw t}))}))}},1194:function(e,t,n){n.d(t,{n:function(){return s}});var r,a=n(9223),i=n(7582),o=n(2774),c=function(e){try{return"number"===typeof e?e.toLocaleString():Number(e).toLocaleString()}catch(t){return"???"}},u=i.ZP.span(r||(r=(0,a.Z)(["\n\tfont-variant-numeric: tabular-nums;\n"]))),s=function(e){var t=e.amount,n=e.className,r=e.unit,a=e.itemProp;return(0,o.jsxs)(u,{className:n,itemProp:a,children:[c(t),null!==r&&void 0!==r?r:"\uc6d0"]})}},7125:function(e,t,n){n.d(t,{U:function(){return c}});var r=n(3955),a=n(8986),i=n(291),o=n(2774),c=function(e){var t=e.hasNext,n=e.fetch,c=e.recheckDeps,u=e.isFetching,s=e.root,l=(0,a.useRef)(n),f=(0,a.useState)(null),d=(0,r.Z)(f,2),p=d[0],h=d[1];return(0,a.useEffect)((function(){if(p&&t&&!u){var e=new IntersectionObserver((function(e,t){e.forEach((function(e){var t;e.isIntersecting&&(null===(t=l.current)||void 0===t||t.call(l))}))}),{root:s,rootMargin:"-40px 0px"});return e.observe(p),function(){e.disconnect()}}}),[p,t,u,c]),t?(0,o.jsx)("div",{ref:h,children:(0,o.jsx)(i.Do,{})}):null}},7363:function(e,t,n){n.d(t,{b:function(){return v}});var r=n(3955),a=n(7988),i=n(8986),o=n(3811),c=n(7370);var u={sortData:{key:"",order:"desc"},query:"",selectFilters:new Map,selectedSet:new Set},s=function(){var e=function(e,t){var n=(0,i.useRef)(e);"function"===typeof n.current&&n.current===e&&(n.current=n.current());var a=(0,i.useRef)(t);a.current=t;var o=(0,i.useState)(0),u=(0,r.Z)(o,2),s=(u[0],u[1]),l=(0,i.useCallback)((function(e,t){var r=n.current,i="function"===typeof e?e(r):e;Object.keys(i).some((function(e){return i[e]!==r[e]}))&&("object"===typeof r&&r&&!Array.isArray(r)?n.current=(0,c.Z)((0,c.Z)({},r),i):n.current=i,"function"===typeof a.current&&a.current(n.current),t||s((function(e){return e+1})))}),[]),f=(0,i.useCallback)((function(e){return l(e,!0),n.current}),[]),d=(0,i.useCallback)((function(){return n.current}),[]);return{state:n.current,setState:l,setMutation:f,getState:d}}((function(){return(0,c.Z)({},u)})),t=e.state,n=e.setState;return{getTableState:e.getState,setTableState:n,mutateTableState:e.setMutation,tableState:t}},l=n(291),f=n(3082),d=n(2774),p=function(e,t){return"string"===typeof e?{width:e,flex:t||"none"}:t?{flex:"".concat(t," ").concat(t," ").concat(10*t,"px")}:{flex:"1 1 10px"}},h=function(e){var t=e.generator,n=e.tableState,r=e.setTableState,a=n.sortData;return(0,d.jsx)(f.k.Tr,{children:t.map((function(e){var t=e.head,i=e.width,o=e.flex,c=(e.sort,e.className),u=e.key,s=(e.headSelect,function(e){var t=typeof e;if("string"===t)return function(){return e};if("function"===t)return e;return function(){return""}}(t));return(0,d.jsx)(f.k.Th,{className:c,style:p(i,o),children:s(n,r,u===a.key?a.order:"")},u)}))})},y=function(e){var t=e.item,n=e.onRowClick,r=e.generator,a=e.tableState,i=e.setTableState,c=e.isSelected,u=e.attachmentRender,s=Boolean(n),l=(0,d.jsx)(f.k.Tr,{itemScope:!0,className:(0,o.d)(s?"is-clickable":"",c?"is-selected":""),tabIndex:0,onClick:function(){null===n||void 0===n||n(t)},children:r.map((function(e){var n=e.body,r=e.width,o=e.flex,c=e.className,u=e.key;return(0,d.jsx)(f.k.Td,{itemProp:u,className:c,style:p(r,o),children:n(t,a,i)},u)}))});return u?(0,d.jsxs)(f.k.Attachment,{itemScope:!0,children:[l,u(t,a,i)]}):l},m=function(e){var t=e.isLoading,n=e.empty;return(0,d.jsx)(f.k.Empty,{children:t?(0,d.jsx)(l.Do,{}):n||"Nothing to Display"})};var g=function(e){var t=e.trackBy,n=e.generator;return{trackByFn:(0,i.useMemo)((function(){return"function"===typeof t?t:"string"===typeof t?function(e){return(e[t]||"").toString()}:function(e,t){return t.toString()}}),[t]),filterData:(0,i.useMemo)((function(){var e={select:new Map,query:new Map};return n.forEach((function(t){var n=t.key,r=t.headSelect,a=t.query;r&&e.select.set(n,r.filter),a&&e.query.set(n,a)})),e}),[n])}},v=(0,i.memo)((function(e){var t,n=e.filter,o=e.items,c=e.generator,u=e.className,l=e.attachmentRender,p=e.onRowClick,v=e.isLoading,x=e.empty,b=e.normalizeQuery,k=s(),S=k.tableState,j=k.setTableState,N=S.sortData,w=S.query,T=S.selectFilters,Z=b?b(w):w,C=null===(t=c.find((function(e){var t=e.key;return N.key===t})))||void 0===t?void 0:t.sort,M=g(e),R=M.filterData,z=M.trackByFn,D=(0,i.useMemo)((function(){var e=o.filter((function(e){var t,i=(0,a.Z)(R.select);try{for(i.s();!(t=i.n()).done;){var o=(0,r.Z)(t.value,2),c=o[0],u=o[1],s=T.get(c);if(u&&s&&!u(e,s,S))return!1}}catch(y){i.e(y)}finally{i.f()}if(Z){var l,f=!1,d=(0,a.Z)(R.query);try{for(d.s();!(l=d.n()).done;){var p=(0,r.Z)(l.value,2),h=(p[0],p[1]);if(null!==h&&void 0!==h&&h(e,Z,S)){f=!0;break}}}catch(y){d.e(y)}finally{d.f()}if(!f)return!1}return!n||n(e)}));return C?e.sort(C(N.order)):e}),[R,o,S,n,T]);return(0,d.jsxs)(f.k.Table,{className:u,children:[(0,d.jsx)(f.k.Thead,{className:f.A.thead,children:(0,d.jsx)(h,{generator:c,tableState:S,setTableState:j})}),(0,d.jsx)(f.k.Tbody,{className:f.A.tbody,children:!v&&D.length>0?D.map((function(e,t){var n=z(e,t);return(0,d.jsx)(y,{item:e,isSelected:S.selectedSet.has(n),generator:c,onRowClick:p,tableState:S,setTableState:j,attachmentRender:l},n)})):(0,d.jsx)(m,{empty:x,isLoading:v})})]})}));v.displayName="TableList",(0,i.memo)((function(e){var t,n=e.filter,o=e.items,c=e.generator,u=e.groupBy,p=e.className,v=e.empty,x=e.attachmentRender,b=e.onRowClick,k=e.isLoading,S=e.normalizeQuery,j=e.groupSort,N=e.groupTitleRenderer,w=s(),T=w.tableState,Z=w.setTableState,C=T.sortData,M=T.query,R=T.selectFilters,z=S?S(M):M,D=null===(t=c.find((function(e){var t=e.key;return C.key===t})))||void 0===t?void 0:t.sort,F=g(e),P=F.filterData,E=F.trackByFn,L=(0,i.useMemo)((function(){return"function"===typeof u?u:"string"===typeof u?function(e){return(e[u]||"").toString()}:function(e,t){return t.toString()}}),[u]),q=(0,i.useMemo)((function(){var e={},t={};return o.forEach((function(i,o){var c,u=(0,a.Z)(P.select);try{for(u.s();!(c=u.n()).done;){var s=(0,r.Z)(c.value,2),l=s[0],f=s[1],d=R.get(l);if(f&&d&&!f(i,d,T))return!1}}catch(b){u.e(b)}finally{u.f()}if(z){var p,h=!1,y=(0,a.Z)(P.query);try{for(y.s();!(p=y.n()).done;){var m=(0,r.Z)(p.value,2),g=(m[0],m[1]);if(null!==g&&void 0!==g&&g(i,z,T)){h=!0;break}}}catch(b){y.e(b)}finally{y.f()}if(!h)return!1}if(!n||n(i)){var v=E(i,o),x=L(i,o);e[v]=i,t[x]||(t[x]={groupId:x,ids:[]}),t[x].ids.push(v)}})),{passedGroup:t,passedMap:e}}),[P,o,T,n,E,L]),B=(0,i.useMemo)((function(){var e=[],t=q.passedMap,n=q.passedGroup,r=Object.values(n);return j&&r.sort(j),r.forEach((function(n){var r=n.groupId,a=n.ids;if(a.length&&a.find((function(e){return!!t[e]}))){var i=D?a.sort((function(e,n){return D(C.order)(t[e],t[n])})):a;e.push({type:"title",id:r}),i.forEach((function(n){t[n]&&e.push({type:"content",id:n})}))}})),e}),[q,j]);return(0,d.jsxs)(f.k.Table,{className:p,children:[(0,d.jsx)(f.k.Thead,{className:f.A.thead,children:(0,d.jsx)(h,{generator:c,tableState:T,setTableState:Z})}),(0,d.jsx)(f.k.Tbody,{className:f.A.tbody,children:!k&&B.length>0?B.map((function(e,t){var n=e.id;return"title"===e.type?N(n):(0,d.jsx)(y,{item:q.passedMap[n],isSelected:T.selectedSet.has(n),generator:c,onRowClick:b,tableState:T,setTableState:Z,attachmentRender:x},"item::"+n)})):(0,d.jsx)(f.k.Empty,{children:k?(0,d.jsx)(l.Do,{}):(0,d.jsx)(m,{empty:v,isLoading:k})})})]})})).displayName="GroupTableList"}}]);
//# sourceMappingURL=362.72912eed.chunk.js.map