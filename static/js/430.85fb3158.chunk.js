"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[430],{4430:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r,a,o,i,c=n(9223),u=n(8986),s=n(7125),l=n(7363),f=n(7582),d=n(1194),y=n(7139),p=n(9477),h=n(379),m=(0,y.HE)({query:function(e){return(0,h.z)("/stocks-relative-cursor".concat("number"===typeof(null===e||void 0===e?void 0:e.offset)?"?offset=".concat(null===e||void 0===e?void 0:e.offset):"")).then((function(e){return{stocks:e.data,nextCursor:e.nextCursor}}))},cursorMode:"relative",normalize:function(e){return e.reduce((function(e,t){return e.concat(t.data.stocks)}),[])},cacheKeyBy:function(e){return e.offset},getNextCursor:function(e){var t=e.data;return t.nextCursor?{offset:t.nextCursor}:null}}),v=n(8304),x=n(9887),k=n(3082),b=n(2774),g=f.ZP.span(r||(r=(0,c.Z)(["\n  display: block;\n  margin-top: 4px;\n  color: #121212;\n  &.is-down {\n    color: #007aff;\n  }\n  &.is-up {\n    color: #e74c3c;\n  }\n"]))),S=[{key:"id",body:function(e){return e.id.toString()},head:"ID",width:"60px"},{key:"name",body:function(e){return e.name},head:"Name",flex:2.5},{key:"symbol",body:function(e){return e.symbol},head:"Symbol"},{key:"company",body:function(e){return e.company},head:"Company"},{key:"price",body:function(e){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.n,{amount:e.price}),(0,b.jsxs)(g,{className:e.percent>0?"is-up":0===e.percent?void 0:"is-down",children:[e.percent,"%"]})]})},head:"Price"}],j=f.ZP.div(a||(a=(0,c.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 10px 20px;\n  position: sticky;\n  top: 0;\n  height: 60px;\n  background-color: #f8f8f8;\n  z-index: 4;\n  "," {\n    margin-left: 10px;\n  }\n"])),v.wg),N=f.ZP.div(o||(o=(0,c.Z)(["\n  overflow-y: scroll;\n  height: 100%;\n  position: relative;\n"]))),T=(0,f.ZP)(l.b)(i||(i=(0,c.Z)(["\n  & ."," {\n    position: sticky;\n    top: 60px;\n  }\n"])),k.A.thead),w=function(){var e=(0,y.dc)(m),t=e.isFetching,n=e.isFetchingPrev,r=e.isFetchingNext,a=e.isRefetching,o=e.data,i=e.error,c=e.nextCursor;return(0,u.useEffect)((function(){m.fetchQuery((function(e){return e||{offset:void 0}}),"stock")}),[]),i?(0,b.jsx)(p.m,{buttons:[{label:"reload",onClick:function(){m.refetchQuery()}}]}):(0,b.jsx)(N,{children:(0,b.jsxs)(x.B,{children:[(0,b.jsxs)(j,{children:[(0,b.jsx)(v.wg,{fillColor:"primary",fillType:"line",onClick:function(){m.fetchQuery({offset:void 0})},children:"restart"}),(0,b.jsx)(v.wg,{fillColor:"primary",fillType:"fill",onClick:function(){m.refetchQuery()},children:"refetch"})]}),(0,b.jsx)(T,{isLoading:!m.isInitiated()&&t,className:"default-table",items:o,trackBy:function(e){return e.id.toString()},generator:S}),(0,b.jsx)(s.U,{hasNext:!!c,isFetching:r,recheckDeps:"".concat(a,"_").concat(n),fetch:m.fetchNext})]})})}},379:function(e,t,n){n.d(t,{z:function(){return r}});var r=function(){return fetch.apply(void 0,arguments).then((function(e){return e.json().then((function(t){if(!e.ok)throw t;return t})).catch((function(t){if(e.ok)return{};throw t}))}))}},1194:function(e,t,n){n.d(t,{n:function(){return s}});var r,a=n(9223),o=n(7582),i=n(2774),c=function(e){try{return"number"===typeof e?e.toLocaleString():Number(e).toLocaleString()}catch(t){return"???"}},u=o.ZP.span(r||(r=(0,a.Z)(["\n\tfont-variant-numeric: tabular-nums;\n"]))),s=function(e){var t=e.amount,n=e.className,r=e.unit,a=e.itemProp;return(0,i.jsxs)(u,{className:n,itemProp:a,children:[c(t),null!==r&&void 0!==r?r:"\uc6d0"]})}},7125:function(e,t,n){n.d(t,{U:function(){return c}});var r=n(3955),a=n(8986),o=n(291),i=n(2774),c=function(e){var t=e.hasNext,n=e.fetch,c=e.recheckDeps,u=e.isFetching,s=e.root,l=(0,a.useRef)(n),f=(0,a.useState)(null),d=(0,r.Z)(f,2),y=d[0],p=d[1];return(0,a.useEffect)((function(){if(y&&t&&!u){var e=new IntersectionObserver((function(e,t){e.forEach((function(e){var t;e.isIntersecting&&(null===(t=l.current)||void 0===t||t.call(l))}))}),{root:s,rootMargin:"-40px 0px"});return e.observe(y),function(){e.disconnect()}}}),[y,t,u,c]),t?(0,i.jsx)("div",{ref:p,children:(0,i.jsx)(o.Do,{})}):null}},7363:function(e,t,n){n.d(t,{b:function(){return x}});var r=n(3955),a=n(7988),o=n(8986),i=n(3811),c=n(7370);var u={sortData:{key:"",order:"desc"},query:"",selectFilters:new Map,selectedSet:new Set},s=function(){var e=function(e,t){var n=(0,o.useRef)(e);"function"===typeof n.current&&n.current===e&&(n.current=n.current());var a=(0,o.useRef)(t);a.current=t;var i=(0,o.useState)(0),u=(0,r.Z)(i,2),s=(u[0],u[1]),l=(0,o.useCallback)((function(e,t){var r=n.current,o="function"===typeof e?e(r):e;Object.keys(o).some((function(e){return o[e]!==r[e]}))&&("object"===typeof r&&r&&!Array.isArray(r)?n.current=(0,c.Z)((0,c.Z)({},r),o):n.current=o,"function"===typeof a.current&&a.current(n.current),t||s((function(e){return e+1})))}),[]),f=(0,o.useCallback)((function(e){return l(e,!0),n.current}),[]),d=(0,o.useCallback)((function(){return n.current}),[]);return{state:n.current,setState:l,setMutation:f,getState:d}}((function(){return(0,c.Z)({},u)})),t=e.state,n=e.setState;return{getTableState:e.getState,setTableState:n,mutateTableState:e.setMutation,tableState:t}},l=n(291),f=n(3082),d=n(2774),y=function(e,t){return"string"===typeof e?{width:e,flex:t||"none"}:t?{flex:"".concat(t," ").concat(t," ").concat(10*t,"px")}:{flex:"1 1 10px"}},p=function(e){var t=e.generator,n=e.tableState,r=e.setTableState,a=n.sortData;return(0,d.jsx)(f.k.Tr,{children:t.map((function(e){var t=e.head,o=e.width,i=e.flex,c=(e.sort,e.className),u=e.key,s=(e.headSelect,function(e){var t=typeof e;if("string"===t)return function(){return e};if("function"===t)return e;return function(){return""}}(t));return(0,d.jsx)(f.k.Th,{className:c,style:y(o,i),children:s(n,r,u===a.key?a.order:"")},u)}))})},h=function(e){var t=e.item,n=e.onRowClick,r=e.generator,a=e.tableState,o=e.setTableState,c=e.isSelected,u=e.attachmentRender,s=Boolean(n),l=(0,d.jsx)(f.k.Tr,{itemScope:!0,className:(0,i.d)(s?"is-clickable":"",c?"is-selected":""),tabIndex:0,onClick:function(){null===n||void 0===n||n(t)},children:r.map((function(e){var n=e.body,r=e.width,i=e.flex,c=e.className,u=e.key;return(0,d.jsx)(f.k.Td,{itemProp:u,className:c,style:y(r,i),children:n(t,a,o)},u)}))});return u?(0,d.jsxs)(f.k.Attachment,{itemScope:!0,children:[l,u(t,a,o)]}):l},m=function(e){var t=e.isLoading,n=e.empty;return(0,d.jsx)(f.k.Empty,{children:t?(0,d.jsx)(l.Do,{}):n||"Nothing to Display"})};var v=function(e){var t=e.trackBy,n=e.generator;return{trackByFn:(0,o.useMemo)((function(){return"function"===typeof t?t:"string"===typeof t?function(e){return(e[t]||"").toString()}:function(e,t){return t.toString()}}),[t]),filterData:(0,o.useMemo)((function(){var e={select:new Map,query:new Map};return n.forEach((function(t){var n=t.key,r=t.headSelect,a=t.query;r&&e.select.set(n,r.filter),a&&e.query.set(n,a)})),e}),[n])}},x=(0,o.memo)((function(e){var t,n=e.filter,i=e.items,c=e.generator,u=e.className,l=e.attachmentRender,y=e.onRowClick,x=e.isLoading,k=e.empty,b=e.normalizeQuery,g=s(),S=g.tableState,j=g.setTableState,N=S.sortData,T=S.query,w=S.selectFilters,C=b?b(T):T,Z=null===(t=c.find((function(e){var t=e.key;return N.key===t})))||void 0===t?void 0:t.sort,M=v(e),R=M.filterData,D=M.trackByFn,F=(0,o.useMemo)((function(){var e=i.filter((function(e){var t,o=(0,a.Z)(R.select);try{for(o.s();!(t=o.n()).done;){var i=(0,r.Z)(t.value,2),c=i[0],u=i[1],s=w.get(c);if(u&&s&&!u(e,s,S))return!1}}catch(h){o.e(h)}finally{o.f()}if(C){var l,f=!1,d=(0,a.Z)(R.query);try{for(d.s();!(l=d.n()).done;){var y=(0,r.Z)(l.value,2),p=(y[0],y[1]);if(null!==p&&void 0!==p&&p(e,C,S)){f=!0;break}}}catch(h){d.e(h)}finally{d.f()}if(!f)return!1}return!n||n(e)}));return Z?e.sort(Z(N.order)):e}),[R,i,S,n,w]);return(0,d.jsxs)(f.k.Table,{className:u,children:[(0,d.jsx)(f.k.Thead,{className:f.A.thead,children:(0,d.jsx)(p,{generator:c,tableState:S,setTableState:j})}),(0,d.jsx)(f.k.Tbody,{className:f.A.tbody,children:!x&&F.length>0?F.map((function(e,t){var n=D(e,t);return(0,d.jsx)(h,{item:e,isSelected:S.selectedSet.has(n),generator:c,onRowClick:y,tableState:S,setTableState:j,attachmentRender:l},n)})):(0,d.jsx)(m,{empty:k,isLoading:x})})]})}));x.displayName="TableList",(0,o.memo)((function(e){var t,n=e.filter,i=e.items,c=e.generator,u=e.groupBy,y=e.className,x=e.empty,k=e.attachmentRender,b=e.onRowClick,g=e.isLoading,S=e.normalizeQuery,j=e.groupSort,N=e.groupTitleRenderer,T=s(),w=T.tableState,C=T.setTableState,Z=w.sortData,M=w.query,R=w.selectFilters,D=S?S(M):M,F=null===(t=c.find((function(e){var t=e.key;return Z.key===t})))||void 0===t?void 0:t.sort,E=v(e),L=E.filterData,P=E.trackByFn,q=(0,o.useMemo)((function(){return"function"===typeof u?u:"string"===typeof u?function(e){return(e[u]||"").toString()}:function(e,t){return t.toString()}}),[u]),B=(0,o.useMemo)((function(){var e={},t={};return i.forEach((function(o,i){var c,u=(0,a.Z)(L.select);try{for(u.s();!(c=u.n()).done;){var s=(0,r.Z)(c.value,2),l=s[0],f=s[1],d=R.get(l);if(f&&d&&!f(o,d,w))return!1}}catch(b){u.e(b)}finally{u.f()}if(D){var y,p=!1,h=(0,a.Z)(L.query);try{for(h.s();!(y=h.n()).done;){var m=(0,r.Z)(y.value,2),v=(m[0],m[1]);if(null!==v&&void 0!==v&&v(o,D,w)){p=!0;break}}}catch(b){h.e(b)}finally{h.f()}if(!p)return!1}if(!n||n(o)){var x=P(o,i),k=q(o,i);e[x]=o,t[k]||(t[k]={groupId:k,ids:[]}),t[k].ids.push(x)}})),{passedGroup:t,passedMap:e}}),[L,i,w,n,P,q]),A=(0,o.useMemo)((function(){var e=[],t=B.passedMap,n=B.passedGroup,r=Object.values(n);return j&&r.sort(j),r.forEach((function(n){var r=n.groupId,a=n.ids;if(a.length&&a.find((function(e){return!!t[e]}))){var o=F?a.sort((function(e,n){return F(Z.order)(t[e],t[n])})):a;e.push({type:"title",id:r}),o.forEach((function(n){t[n]&&e.push({type:"content",id:n})}))}})),e}),[B,j]);return(0,d.jsxs)(f.k.Table,{className:y,children:[(0,d.jsx)(f.k.Thead,{className:f.A.thead,children:(0,d.jsx)(p,{generator:c,tableState:w,setTableState:C})}),(0,d.jsx)(f.k.Tbody,{className:f.A.tbody,children:!g&&A.length>0?A.map((function(e,t){var n=e.id;return"title"===e.type?N(n):(0,d.jsx)(h,{item:B.passedMap[n],isSelected:w.selectedSet.has(n),generator:c,onRowClick:b,tableState:w,setTableState:C,attachmentRender:k},"item::"+n)})):(0,d.jsx)(f.k.Empty,{children:g?(0,d.jsx)(l.Do,{}):(0,d.jsx)(m,{empty:x,isLoading:g})})})]})})).displayName="GroupTableList"}}]);
//# sourceMappingURL=430.85fb3158.chunk.js.map